<html>

<head>
<meta http-equiv="Content-Type"
content="text/html; charset=iso-8859-1">
<meta name="GENERATOR" content="Microsoft FrontPage 5.0">
<title>ESIEE.BureauD.IN413.TP1</title>
<!-- Created with AOLpress/2.0 -->
</head>

<body bgcolor="#E9CFEC">

<p align="center"><font size="6"><strong>TP1</strong></font> </p>
<div align="center"><center>

<table border="18" cellpadding="2">
    <tr>
        <td valign="top"><div align="center"><center><table
        border="0" cellpadding="2">
            <tr>
                <td align=left><font size="4">Lectures
                préalables : &nbsp; </font></td>
            </tr>
            <tr>
                <td align=left><ul>
                    <li><font size="4">tutorial</font>
                        <ul>
                            <li>Getting Started</li>
                            <li>Learning the Java Language</li>
                        </ul>
                    </li>
                </ul>
                </td>
            </tr>
        </table>
        </center></div></td>
        <td><table border="0" cellpadding="2">
            <tr>
                <td><font size="4">Thèmes du TP</font> :</td>
            </tr>
            <tr>
                <td><ul>
                    <li><font size="4">Une Pile d'Object</font> </li>
                    <li><font size="4">Plusieurs classes</font> </li>
                </ul>
                </td>
            </tr>
        </table>
        </td>
    </tr>
</table>
</center></div>

<p>&nbsp; </p>

<h3>
<ul>
 <li>Visualisez maintenant le sujet en ouvrant <tt>index.html</tt> du r&eacute;pertoire qui a &eacute;t&eacute;
  cr&eacute;&eacute; &agrave; l'ouverture de <tt>tp1.jar</tt> par BlueJ; vous aurez ainsi acc&egrave;s
  aux applettes et pourrez exp&eacute;rimenter les comportements qui sont attendus.<br>
  En cas de probl&egrave;me pour visualiser les applettes, ouvrez une fen&ecirc;tre Terminal et lancez
  <tt>appletviewer index.html</tt>
</li>
  <font color=red>
 <li>Soumettez chaque question à l'outil d'évaluation <i>jnews/junit3</i>, puis rendez le tp avant la date limite
     gr&acirc;ce &agrave; l'outil <i>jnews/depot</i>.</li>
  </font>
</ul>
</h3>

<hr>

<p><img src="question1.jpg" align="middle" width="91" height="73"><font
size="4"><strong>.1) Une pile d'&quot;Object&quot;s</strong></font>
</p>

<p align="left"><font size="4"><strong>Les éléments de la
classe Pile sont des instances de la classe</strong></font>
<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html" target=_blank
><font size="5"><code><strong> java.lang.<b>Object</b></strong></code></font></a>
<font size="4"> (<i>classe racine de toute classe Java)</i></font>. </p>

<p><font size="4">Le code d'une classe pile qui n'acceptait que des entiers
 a &eacute;t&eacute; modifi&eacute;
 pour qu'elle accepte n'importe quel <tt>Object</tt>.<br> 
 </font> </p>

<p><font size="4">- Complétez la méthode actionPerformed de la classe 
ApplettePile et vérifiez ensuite le bon fonctionnement d'une pile via cette 
interface</font></p>

<p><font size="4">Ci-dessous un exemple de l' ApplettePile</font>
<i>(Essayez d'empiler des nombres, des mots, ...)</i>
</p>

<table cols=3 border=0>
 <tr>
  <td align=right>
   donn&eacute;e &rarr;
   <br>&nbsp;<br>
   contenu &rarr;
   <p>
  </td>
  <td>
   <applet code="question3.ApplettePile"
           align="baseline" width="400" height="100"
           archive="applettes.jar"><param name="TAILLE"
           value="2">
   </applet>
  </td>
  <td>
   &larr; sommet
   <br>&nbsp;<br>
   &nbsp;
   <p>
  </td>
 </tr>
</table>

<p>

<table border=1 cellpadding=5>
 <tr><td>
  <b>AIDE :</b><br>
  - <tt>champ.getText()</tt> permet de r&eacute;cup&eacute;rer la <i>String</i>
    tap&eacute;e dans le champ de saisie
  <br>
  - <tt>champ.setText(<i>uneString</i>)</tt> modifie le contenu du champ avec <i>uneString</i>
 </td></tr>
</table>

<p>&nbsp; </p>

<p><img src="question1.jpg" align="middle" width="91" height="73"><font
size="4"><strong>.2) </strong>Compilez la classe
&quot;UneUtilisation&quot;, lancez <tt>main()</tt>, vérifiez l'affichage produit,
et comprenez l'exception produite.</font> </p>

<pre>package question1;

public class UneUtilisation
{
  public static void main( final String[] pArgs) throws Exception
  {
    Pile p1 = new Pile(6);
    Pile p2 = new Pile(10);
    // p1 est ici une pile de polygones réguliers PolygoneRegulier.java
    p1.empiler( new PolygoneRegulier(4,100) );
    p1.empiler( new PolygoneRegulier(5,100) );
    p1.empiler( &quot;polygone&quot; );
    p1.empiler( new Integer(100) );
    System.out.println( &quot; la pile p1 = &quot; + p1 ); 
                                          
    try {
      p1.empiler(new PolygoneRegulier(5,100));     
      // ....
      Boolean vB = (Boolean)p1.depiler();  // &lt;-- une exception est levée à l'exécution
    } catch( final Exception pE ) {
      pE.printStackTrace();
    }
  } // main()
} // UneUtilisation
</pre>
<!--
<p><img src="question1.jpg" align="middle" width="91" height="73"><font
size="4"><strong>.3) </strong>Proposez une classe conséquente de
tests unitaires de la classe Pile, (classe PileTest) voir ce </font><a
href="http://www.bluej.org/tutorial/testing-tutorial.pdf"
target="tutoriel"><font size="4">tutoriel</font></a> </p>
-->
<strong>
Soumettez cette première question à l'outil d'évaluation
pour ne pas laisser passer de problèmes avant d'aborder
la question suivante.
</strong>

<hr>

<p><font size="4"><strong><img src="question2.jpg" align="middle"
width="90" height="73"></strong>.1) Spécification : Interface</font>
</p>

<p><font size="4">Soit l'interface spécifiant le comportement
d'une pile (fichier <tt>PileI.java</tt>) : </font></p>

<table border="1" cellpadding="2">
    <caption align="top"><font size="4"><strong>interface PileI</strong></font>
    </caption>
    <tr>
        <td><pre>package question2;
import question1.PilePleineException;
import question1.PileVideException;

public interface PileI
{
    public final static int CAPACITE_PAR_DEFAUT = 6;
    // &agrave; utiliser quand le param&egrave;tre du constructeur <= 0

    public void empiler(Object o) throws PilePleineException;
    public Object depiler() throws PileVideException;

    public boolean estVide();
    public boolean estPleine();

    public String toString();

<strong>    public Object sommet() throws PileVideException; // retourne le sommet de la pile
    public int capacite(); // nb de cases
    public int taille();   // nb d'elements presents
    public boolean equals( final Object pO ); // si PileI et meme contenu
    public int hashCode();
    public Object clone() throws CloneNotSupportedException;</strong>
} // PileI
</pre>
        </td>
    </tr>
</table>

<p><font size="4"><i><strong>Attention</strong> :
<br>
- 6 nouvelles méthodes sont spécifiées dans PileI
  (sommet, capacité, taille, equals, hashCode, et clone),
  et donc toute implémentation de cette interface
  doit implanter aussi ces 6 méthodes.
<br>
- Deux d'entre-elles vous sont fournies, mais cette note intitulée
  "<a target=_blank href="http://www.javaworld.com/article/2076332/java-se/how-to-avoid-traps-and-correctly-override-methods-from-java-lang-object.html">How
  to avoid traps and correctly override methods from java.lang.Object</a>"
  peut vous être utile si vous voulez les comprendre.
<!--
<br>
- La compilation de la m&eacute;thode clone g&eacute;n&egrave;re un warning
  que vous pouvez ignorer.
-->
</i></font>
</p>

<p>

<table border=1 cellpadding=5>
 <tr><td>
  <b>AIDE :</b><br>
  - Il nous faut convenir des crit&egrave;res pour d&eacute;cider si 2 piles seront &eacute;gales ou non.
<!--
  <br>
  - L'&eacute;nonc&eacute; "PileI et meme contenu" sugg&egrave;re de ne pas tenir compte de la capacit&eacute;.
-->
  <br>
  - Un algorithme possible pour <tt>equals</tt> 
    (voir aussi la <a target=_blank href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#equals-java.lang.Object-">javadoc</a>)
    est donc :
  <ol>
   <li>si p est la m&ecirc;me r&eacute;f&eacute;rence que l'objet courant, retourner VRAI.</li>
   <li>si p vaut <tt>null</tt>, retourner FAUX.</li>
   <li>si p n'est pas du même type que l'objet courant, retourner FAUX. (*)</li>
   <li>si p n'a pas la m&ecirc;me taille que l'objet courant, retourner FAUX.</li>
   <li>Il ne reste plus qu'&agrave; comparer un &agrave; un tous les &eacute;l&eacute;ments des 2 piles,
       mais attention &agrave; ne modifier aucune des 2 piles !</li>
  </ol>
 </td></tr>
</table>
<p>
(*) Facultatif : Si la condition 3 ci-dessus &eacute;tait
    "si p n'impl&eacute;mente pas <tt>PileI</tt>",
    comment feriez-vous ?
    (impl&eacute;mentation difficile, mais r&eacute;flexion int&eacute;ressante)

<p>&nbsp;</p>

<hr>

<p><font size="4"><strong><img src="question2.jpg" align="middle"
width="90" height="73"></strong>.1) Implémenter une interface :
PLUSIEURS implémentations UN SEUL comportement</font> </p>

<blockquote>
    <blockquote>
        <pre>
</pre>
    </blockquote>
</blockquote>

<p><font size="4">Proposez <strong>2 autres</strong>
implémentations des Piles (donc implémentant l'interface </font><font
color="#0F0F0F" size="4"><code><strong>PileI</strong></code></font><font size="4">).
<br>
<i><b>Attention !</b> Pour l'utilisateur, ici
les piles doivent toujours être <b>bornées</b></i></font></p>

<ul>
    <li><font size="4">Pile2 : utilise la classe prédéfinie
<a href="http://java.sun.com/javase/6/docs/api/java/util/Stack.html" target=_blank
 ><code><strong>java.util.Stack&lt;Object&gt;</strong></code></a>
&nbsp;(<strong>Pile2</strong>.java)</font></li>
    <li><font size="4">Pile3 : utilise la classe prédéfinie
<a href="http://java.sun.com/javase/6/docs/api/java/util/Vector.html" target=_blank
 ><code><strong>java.util.Vector&lt;Object&gt;</strong></code></a>
&nbsp;(<strong>Pile3</strong>.java)</font>
    </li>
</ul>

 <blockquote>
   <img border="0" src="question2_1.gif" width="563" height="376"></blockquote>

<p><font size="4">Remarques : </font></p>

<ul>
    <li><p align="left"><font size="4">
        Pile2 et Pile3 seront
        composées d'une instance d'une classe prédéfinie comme
        le suggère les extraits de code suivants :</font> </p>

<blockquote>
    <pre><font size="4">import java.util.Stack;</font>
<font size="4">public class Pile2</font><font color="#0F0F0F"
size="3"><code> </code><code><b>implements PileI,Cloneable</b> { </code></font>
<font size="4">  <b>private Stack&lt;Object&gt; stk; </b></font>
<font size="4">  ...</font>
<font color="#0F0F0F" size="3"><code>} </code></font>

<font size="4">import java.util.Vector;</font>
<font size="4">public class Pile3 </font><font color="#0F0F0F"
size="3"><code><b>implements PileI,Cloneable</b> { </code></font>
<font size="4">  <b>private Vector&lt;Object&gt; v; </b></font>
<font size="4">  ...</font>
<font color="#0F0F0F" size="3"><code>}</code></font>
</pre>

</blockquote>
    </li>
    <li><font size="4">
      Demander une <tt>Pile2</tt> ou une <tt>Pile3</tt> d'une taille &le;0
      doit cr&eacute;er une pile de <tt>CAPACITE_PAR_DEFAUT</tt> &eacute;l&eacute;ments.
    </li></font>
    <li><font size="4">
      Attention &agrave; l'ordre des &eacute;l&eacute;ments dans <tt>toString()</tt> !
    </li></font>
</ul>

<div align="center">
<table border="1" cellpadding="5" width="70%">
    <tr>
        <td>Cette approche est nommée par Mark Grand le
        &quot;Pattern delegation&quot;. Elle consiste à définir
        une donnée d'instance d'une classe, ensuite utilisée
        dans les méthodes. <br>
        Ce pattern réalise une interface entre le client de la
        classe et l'implémentation effective par une classe de
        service. Il permet un couplage moins fort entre les deux
        classes que si l'une héritait de l'autre.</td>
    </tr>
</table>
</div>
<p>
<hr>

&nbsp;<p><font size="4">Vérifiez le bon fonctionnement des classes de tests 
 unitaires et ensuite le fonctionnement de votre applette. </font></p>

<p><font size="4">ci dessous &quot;ApplettePile&quot; avec une
implémentation de la classe Pile par délégation à la classe
java.util.Stack&lt;Object&gt;</font> </p>

<blockquote>
    <blockquote>
        <blockquote>
            <blockquote>
                <p><applet code="question4.ApplettePile"
                align="baseline" width="400" height="100"
                archive="applettes.jar"><param name="TAILLE"
                value="3"></applet></p>
            </blockquote>
        </blockquote>
    </blockquote>
</blockquote>

<p>&nbsp; </p>

<hr>

<p><img src="question3.jpg" alt="[Image]" width="87" height="75"
align=top><font
size="4"><strong>Cette question supplémentaire n'a pas à être
soumise à évaluation par junit3 ni à être "rendue",
mais il est conseill&eacute; de la traiter en travail personnel.</strong>
<p>
<b>question 3-1)</b> <i>Généricité : un premier usage</i></font></p>

<p><font size="4"><strong>L'interface pileI est désormais
paramétrée par le type des éléments</strong></font> </p>

<pre><font size="4">package question3;</font>

<font size="4">import question1.PilePleineException;</font>
<font size="4">import question1.PileVideException;</font>

<font size="4">public interface PileI</font><font size="5"><strong>&lt;T&gt;</strong></font><font
size="4"> {</font>

<font size="4">  public final static int CAPACITE_PAR_DEFAUT = 6;</font>

<font size="4">  public void empiler(</font><font size="5"><strong>T</strong></font><font
size="4"> o) throws PilePleineException;</font>
<font size="4">  public </font><font size="5"><strong>T</strong></font><font
size="4"> dépiler() throws PileVideException;</font>

<font size="4">  public </font><font size="5"><strong>T</strong></font><font
size="4"> sommet() throws PileVideException;</font>

.../... <font size="4">} // PileI</font> </pre>

<p><font size="4"><b>question 3-2)</b> Vérifiez le source de la classe
Pile2&lt;T&gt; et <strong>modifier</strong> l'IHM ApplettePile,
ce type de message obtenu à la compilation <b>ne doit plus
apparaître</b></font> </p>

<blockquote>
    <blockquote>
        <p><img src="Capture-4.jpg" width="558" height="162"> </p>
    </blockquote>
</blockquote>

<p>&nbsp;</p>

<p><font size="4"><b>question 3-3)</b> Dans la méthode main de la classe
UneUtilisation, proposez <strong>toutes</strong> les
déclarations correctes afin que la compilation de cette classe
s'effectue <strong>sans aucun message d'erreur ou alertes</strong>
(<font color=red>sauf pour la méthode <tt>clone</tt></font>).
</font></p>

<blockquote>
    <p><font size="4">i.e. proposez les déclarations telles que </font><font
    color="#FF0000" size="4">p1</font><font size="4"> contient
    des éléments &quot;de type PolygoneRegulier&quot;, </font><font
    color="#AA00AA" size="4">p2</font><font size="4"> que des
    Piles de Polygone régulier , etc ...</font> </p>
</blockquote>

<blockquote>
    <pre><font size="4">import question1.PolygoneRegulier;</font>

<font size="4">public class UneUtilisation {</font>

<font size="4">  public static void main(String[] args) throws Exception {</font>
<font color="#FF0080" size="4"><strong>    </strong></font><font
color="#FF0000" size="4"><strong>PileI ... p1 = new Pile2 ... (6);</strong></font>
<font color="#FF0080" size="4"><strong>    </strong></font><font
color="#AA00AA" size="4"><strong>PileI ... p2 = new Pile2 ... (10);</strong></font>
<font size="4">    </font>etc ...</pre>

    <p><font size="4">Vérifiez ensuite que ces lignes extraites
    de la question 1 ne se compilent plus !</font></p>
    <pre><font size="4">     try {
       p1.empiler(new PolygoneRegulier(5,100));     
       String s = p1.depiler();
     } catch(Exception e ) {
       e.printStackTrace();
     }</font>
<font size="4">  }</font>
<font size="4">}</font></pre>
</blockquote>

<hr>

<p><font size="4"><br>
</font></p>
</body>
</html>